var chats = angular.module('chats', []);

// todo: tighten this up 
chats.controller('ChatsController', ['$scope', "socket",
    function($scope, socket){

        $scope.socket.on('init', function(data){
           console.log('init');
        });
        $scope.socket.on('send:message', function(message){
            console.log('heard send');
            $scope.messages.push({text:message});
        });

        $scope.messages = [];

        $scope.sendMessage = function(){
            console.log('clicked send');
            socket.emit('send:message', {text: $scope.message
            });
            $scope.messages.push({
                text: $scope.message
            });
	    console.log($scope.messages);

            // clear message box
            $scope.message = '';

        };

   
}]);